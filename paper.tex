\documentclass[acmsmall,review,screen,10pt]{acmart}\settopmatter{printfolios=true,printccs=false,printacmref=false}
%% For double-blind review submission, w/ CCS and ACM Reference
%\documentclass[acmsmall,review,anonymous]{acmart}\settopmatter{printfolios=true}
%% For single-blind review submission, w/o CCS and ACM Reference (max submission space)
%\documentclass[acmsmall,review]{acmart}\settopmatter{printfolios=true,printccs=false,printacmref=false}
%% For single-blind review submission, w/ CCS and ACM Reference
%\documentclass[acmsmall,review]{acmart}\settopmatter{printfolios=true}
%% For final camera-ready submission, w/ required CCS and ACM Reference
%\documentclass[acmsmall]{acmart}\settopmatter{}


%% Journal information
%% Supplied to authors by publisher for camera-ready submission;
%% use defaults for review submission.
\acmJournal{PACMPL}
\acmVolume{1}
\acmNumber{CONF} % CONF = POPL or ICFP or OOPSLA
\acmArticle{1}
\acmYear{2018}
\acmMonth{1}
\acmDOI{} % \acmDOI{10.1145/nnnnnnn.nnnnnnn}
\startPage{1}

\setcopyright{none}
\bibliographystyle{ACM-Reference-Format}
\citestyle{acmauthoryear}   %% For author/year citations

\usepackage{stmaryrd}
\usepackage{mathpartir}
\usepackage[capitalize]{cleveref}
% \usepackage{algorithmic}
\usepackage{mathtools}
\usepackage{graphicx}
\usepackage{textcomp}
\usepackage{booktabs}
\usepackage{multirow}
\usepackage{subcaption}
\usepackage{xcolor}
\usepackage{listings}
\definecolor{dkgreen}{rgb}{0,0.6,0}
\definecolor{dkblue}{rgb}{0,0,0.6}
\definecolor{dkred}{rgb}{0.6,0,0}
\definecolor{ltblue}{rgb}{0,0.4,0.4}
\definecolor{dkviolet}{rgb}{0.3,0,0.5}

\usepackage{xspace}
\usepackage{ebproof}
\usepackage{macros}
\usepackage{enumitem}
\let\Bbbk\undefined% HACK: Some other package already defined this symbol..?
\usepackage{amsmath}
\usepackage{amssymb} % for \triangleq
\usepackage{tabularray}

\newtheorem{thm}{Theorem}[section]
\newtheorem{lem}[thm]{Lemma}

\lstdefinelanguage{Coq}{
    % Anything betweeen $ becomes LaTeX math mode
    mathescape=true,
    escapeinside={(|}{|)},
    % Comments may or not include Latex commands
    texcl=false,
    % Vernacular commands
    morekeywords=[1]{Section, Module, End, Require, Import, Export,
        Variable, Variables, Parameter, Parameters, Axiom, Hypothesis,
        Hypotheses, Notation, Local, Tactic, Reserved, Scope, Open, Close,
        Bind, Delimit, Definition, Let, Ltac, Fixpoint, CoFixpoint, Add,
        Morphism, Relation, Implicit, Arguments, Unset, Contextual,
        Strict, Prenex, Implicits, Inductive, CoInductive, Record,
        Structure, Canonical, Coercion, Context, Class, Global, Instance,
        Program, Infix, Theorem, Lemma, Corollary, Proposition, Fact,
        Remark, Example, Proof, Goal, Save, Qed, Defined, Hint, Resolve,
        Rewrite, View, Search, Show, Print, Printing, All, Eval, Check,
        Projections, inside, outside, Def, MetaCoq, Run},
    % Gallina
    morekeywords=[2]{forall, exists, exists2, fun, fix, cofix, struct,
        match, with, end, as, in, return, let, if, is, then, else, for, of,
        nosimpl, when},
    % Sorts
    morekeywords=[3]{Type, Prop, Set, True, False, option},
    % Various tactics, some are std Coq subsumed by ssr, for the manual purpose
    morekeywords=[4]{pose, set, move, case, elim, apply, clear, hnf,
        intro, intros, generalize, rename, pattern, after, destruct,
        induction, using, refine, inversion, injection, rewrite, congr,
        unlock, compute, ring, field, fourier, replace, fold, unfold,
        change, cutrewrite, simpl, have, suff, wlog, suffices, without,
        loss, nat_norm, assert, cut, trivial, revert, bool_congr, nat_congr,
        symmetry, transitivity, auto, split, left, right, autorewrite},
    % Terminators
    morekeywords=[5]{by, done, exact, reflexivity, tauto, romega, omega,
        assumption, solve, contradiction, discriminate},
    % Control
    morekeywords=[6]{do, last, first, try, idtac, repeat},
    % Comments delimiters, we do turn this off for the manual
    morecomment=[s]{(*}{*)}, % chktex 9
    % Spaces are not displayed as a special character
    showstringspaces=false,
    % String delimiters
    morestring=[b]", % chktex 18
    morestring=[d],
    % Size of tabulations
    tabsize=3,
    % Enables ASCII chars 128 to 255
    extendedchars=false,
    % Case sensitivity
    sensitive=true,
    % Automatic breaking of long lines
    breaklines=false,
    % Default style for listings
    basicstyle=\linespread{0.8}\footnotesize,
    % Position of captions is bottom
    captionpos=b,
    % flexible columns
    columns=[l]flexible,
    % Style for (listings') identifiers
    identifierstyle={\ttfamily\color{black}},
    % Style for declaration keywords
    keywordstyle=[1]{\ttfamily\color{dkviolet}},
    % Style for gallina keywords
    keywordstyle=[2]{\ttfamily\color{dkgreen}},
    % Style for sorts keywords
    keywordstyle=[3]{\ttfamily\color{ltblue}},
    % Style for tactics keywords
    keywordstyle=[4]{\ttfamily\color{dkblue}},
    % Style for terminators keywords
    keywordstyle=[5]{\ttfamily\color{dkred}},
    %Style for iterators
    %keywordstyle=[6]{\ttfamily\color{dkpink}},
    % Style for strings
    stringstyle=\ttfamily,
    % Style for comments
    commentstyle={\ttfamily\color{dkgreen}},
    %moredelim=**[is][\ttfamily\color{red}]{/&}{&/},
    literate=
    {\\forall}{{\color{dkgreen}{$\forall\;$}}}1
    {\\exists}{{$\exists\;$}}1
    {<-}{{$\leftarrow\;$}}1
    {=>}{{$\Rightarrow\;$}}1
    {==}{{\code{==}\;}}1
    {==>}{{\code{==>}\;}}1
    %    {:>}{{\code{:>}\;}}1
    {->}{{$\rightarrow\;$}}1
    {<->}{{$\leftrightarrow\;$}}1
    {<==}{{$\leq\;$}}1
    {\#}{{$^\star$}}1
    {\\o}{{$\circ\;$}}1
    {\/\\}{{\slash\symbol{92}}}1
    {\\\/}{{\textbackslash/}}1
    {~}{{$\sim$}}1
    {\@\@}{{$@$}}1
    {\\mapsto}{{$\mapsto\;$}}1
    {\\hline}{{\rule{\linewidth}{0.5pt}}}1 % chktex 44
    %
}[keywords,comments,strings]

% TODO: figure out how to get this to actually highlight the smtlib listing
\lstdefinelanguage{SMTLib}{
    % allow dashes in keywords
    alsoletter={-},
    % Anything betweeen $ becomes LaTeX math mode
    mathescape=true,
    % Comments may or not include Latex commands
    texcl=false,
    % Vernacular commands
    morekeywords=[1]{'set-logic',logic, declare,sort,},
    % Gallina
    morekeywords=[2]{not, and, or, '=>'},
    % Sorts
    % morekeywords=[3]{Type, Prop, Set, True, False, option},
    % Various tactics, some are std Coq subsumed by ssr, for the manual purpose
    % morekeywords=[4]{pose, set, move, case, elim, apply, clear, hnf,
    %     intro, intros, generalize, rename, pattern, after, destruct,
    %     induction, using, refine, inversion, injection, rewrite, congr,
    %     unlock, compute, ring, field, fourier, replace, fold, unfold,
    %     change, cutrewrite, simpl, have, suff, wlog, suffices, without,
    %     loss, nat_norm, assert, cut, trivial, revert, bool_congr, nat_congr,
    %     symmetry, transitivity, auto, split, left, right, autorewrite},
    % Terminators
    % morekeywords=[5]{by, done, exact, reflexivity, tauto, romega, omega,
    %     assumption, solve, contradiction, discriminate},
    % Control
    % morekeywords=[6]{do, last, first, try, idtac, repeat},
    % Spaces are not displayed as a special character
    showstringspaces=false,
    % Size of tabulations
    tabsize=3,
    % Enables ASCII chars 128 to 255
    extendedchars=false,
    % Case sensitivity
    sensitive=true,
    % Automatic breaking of long lines
    breaklines=false,
    % Default style fors listings
    basicstyle=\small,
    % Position of captions is bottom
    captionpos=b,
    % flexible columns
    columns=[l]flexible,
    % Style for (listings') identifiers
    identifierstyle={\ttfamily\color{black}},
    % Style for declaration keywords
    keywordstyle=[1]{\ttfamily\color{dkviolet}},
    % Style for gallina keywords
    keywordstyle=[2]{\ttfamily\color{dkgreen}},
    % Style for sorts keywords
    keywordstyle=[3]{\ttfamily\color{ltblue}},
    % Style for tactics keywords
    keywordstyle=[4]{\ttfamily\color{dkblue}},
    % Style for terminators keywords
    keywordstyle=[5]{\ttfamily\color{dkred}},
    %Style for iterators
    %keywordstyle=[6]{\ttfamily\color{dkpink}},
    % Style for strings
    stringstyle=\ttfamily,
    % Style for comments
    commentstyle={\ttfamily\color{dkgreen}},
    %moredelim=**[is][\ttfamily\color{red}]{/&}{&/},
    %
}[keywords,comments,strings]

\lstset{
  language=Coq,
  basicstyle=\footnotesize\ttfamily,
  columns=fullflexible,
  keepspaces=true,
  breaklines=true,
  frame=none,
  tabsize=2,
}

\usepackage[framemethod=TikZ]{mdframed}

% \lstnewenvironment{code}[1][]%
%   {\noindent\minipage{\linewidth}\medskip 
%    \lstset{basicstyle=\ttfamily\footnotesize,frame=single,#1}}
%   {\endminipage}

\mdfsetup{
  roundcorner=8pt,
  splittopskip=0,%
  splitbottomskip=0,%
  frametitleaboveskip=0,
  frametitlebelowskip=0,
  skipabove=0,%
  skipbelow=0,%
  innerleftmargin=1mm,% 
  innerrightmargin=1mm,
  rightmargin=-1mm,%
  innertopmargin=-1mm,%
  innerbottommargin=-5mm,%
}
\lstnewenvironment{lf-yellow}{\mdframed}{\endmdframed}
\lstnewenvironment{lf-grey}{\mdframed[nobreak=true,linecolor=black!25,backgroundcolor=black!5]}{\endmdframed\vspace{-1.5em}}

\usepackage{bcprules}

\usepackage{tikz}
\newcommand*\circled[1]{\tikz[baseline=(char.base)]{
            \node[shape=circle,draw,inner sep=0.5pt] (char) {#1};}}

% git \commit command
% https://tex.stackexchange.com/questions/455396/how-to-include-the-current-git-commit-id-and-branch-in-my-document
\usepackage{xstring}
\usepackage{catchfile}
\IfFileExists{../.git/HEAD}{%
    \CatchFileDef{\headfull}{../.git/HEAD}{}
    \StrGobbleRight{\headfull}{1}[\head]
    \StrBehind[2]{\head}{/}[\branch]
    \IfFileExists{../.git/refs/heads/\branch}{%
        \CatchFileDef{\commit}{../.git/refs/heads/\branch}{}
    }{%
        \newcommand{\commit}{\headfull}
    }
}

\usepackage{draftwatermark}
\SetWatermarkAngle{0}
\SetWatermarkScale{1}
\SetWatermarkVerCenter{30pt}
\SetWatermarkText{Draft, do not distribute (git: \StrLeft{\commit}{8})}


\begin{document}

\title[Paper]{Paper Template}


% \author{John Sarracino}
% \affiliation{
%   \institution{Cornell University}
%   \country{USA}
% }
% \email{jsarracino@cornell.edu}


\input{abstract}

\maketitle

% \keywords{keyword1, keyword2, keyword3}


\input{intro}
\input{overview}
\input{background}
\input{technical}
\input{eval}
\input{related}

\bibliography{paper}

% \section*{Acknowledgment}

\end{document}
